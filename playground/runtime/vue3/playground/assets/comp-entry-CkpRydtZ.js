var Tn=Object.defineProperty;var ve=t=>{throw TypeError(t)};var En=(t,e,r)=>e in t?Tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var v=(t,e,r)=>En(t,typeof e!="symbol"?e+"":e,r),je=(t,e,r)=>e.has(t)||ve("Cannot "+r);var N=(t,e,r)=>(je(t,e,"read from private field"),r?r.call(t):e.get(t)),M=(t,e,r)=>e.has(t)?ve("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),R=(t,e,r,n)=>(je(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);import{E as Lr,e as An,s as In,c as Sn,i as _n,t as Dn,g as $n}from"./index-BRSae1hi.js";var Fr=typeof global=="object"&&global&&global.Object===Object&&global,Bn=typeof self=="object"&&self&&self.Object===Object&&self,k=Fr||Bn||Function("return this")(),Q=k.Symbol,kr=Object.prototype,vn=kr.hasOwnProperty,jn=kr.toString,pt=Q?Q.toStringTag:void 0;function Pn(t){var e=vn.call(t,pt),r=t[pt];try{t[pt]=void 0;var n=!0}catch(i){}var o=jn.call(t);return n&&(e?t[pt]=r:delete t[pt]),o}var On=Object.prototype,Nn=On.toString;function Mn(t){return Nn.call(t)}var Rn="[object Null]",Ln="[object Undefined]",Pe=Q?Q.toStringTag:void 0;function _t(t){return t==null?t===void 0?Ln:Rn:Pe&&Pe in Object(t)?Pn(t):Mn(t)}function lt(t){return t!=null&&typeof t=="object"}var Mt=Array.isArray;function Rt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Vr(t){return t}var Fn="[object AsyncFunction]",kn="[object Function]",Vn="[object GeneratorFunction]",Un="[object Proxy]";function Ur(t){if(!Rt(t))return!1;var e=_t(t);return e==kn||e==Vn||e==Fn||e==Un}var zt=k["__core-js_shared__"],Oe=function(){var t=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function qn(t){return!!Oe&&Oe in t}var xn=Function.prototype,zn=xn.toString;function tt(t){if(t!=null){try{return zn.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Hn=/[\\^$.*+?()[\]{}|]/g,Kn=/^\[object .+?Constructor\]$/,Gn=Function.prototype,Jn=Object.prototype,Yn=Gn.toString,Qn=Jn.hasOwnProperty,Wn=RegExp("^"+Yn.call(Qn).replace(Hn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xn(t){if(!Rt(t)||qn(t))return!1;var e=Ur(t)?Wn:Kn;return e.test(tt(t))}function Zn(t,e){return t==null?void 0:t[e]}function et(t,e){var r=Zn(t,e);return Xn(r)?r:void 0}var me=et(k,"WeakMap"),Ne=Object.create,to=function(){function t(){}return function(e){if(!Rt(e))return{};if(Ne)return Ne(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function eo(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function ro(){}var no=800,oo=16,io=Date.now;function ao(t){var e=0,r=0;return function(){var n=io(),o=oo-(n-r);if(r=n,o>0){if(++e>=no)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function so(t){return function(){return t}}var vt=function(){try{var t=et(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),co=vt?function(t,e){return vt(t,"toString",{configurable:!0,enumerable:!1,value:so(e),writable:!0})}:Vr,uo=ao(co);function fo(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function lo(t,e,r,n){for(var o=t.length,i=r+-1;++i<o;)if(e(t[i],i,t))return i;return-1}function ho(t){return t!==t}function go(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function po(t,e,r){return e===e?go(t,e,r):lo(t,ho,r)}function mo(t,e){var r=t==null?0:t.length;return!!r&&po(t,e,0)>-1}var yo=9007199254740991,bo=/^(?:0|[1-9]\d*)$/;function wo(t,e){var r=typeof t;return e=e==null?yo:e,!!e&&(r=="number"||r!="symbol"&&bo.test(t))&&t>-1&&t%1==0&&t<e}function Co(t,e,r){e=="__proto__"&&vt?vt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function qr(t,e){return t===e||t!==t&&e!==e}var To=Object.prototype,Eo=To.hasOwnProperty;function Ao(t,e,r){var n=t[e];(!(Eo.call(t,e)&&qr(n,r))||r===void 0&&!(e in t))&&Co(t,e,r)}var Me=Math.max;function Io(t,e,r){return e=Me(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=Me(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=n[o];return s[e]=r(a),eo(t,this,s)}}function So(t,e){return uo(Io(t,e,Vr),t+"")}var _o=9007199254740991;function xr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_o}function zr(t){return t!=null&&xr(t.length)&&!Ur(t)}var Do=Object.prototype;function Hr(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Do;return t===r}function $o(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Bo="[object Arguments]";function Re(t){return lt(t)&&_t(t)==Bo}var Kr=Object.prototype,vo=Kr.hasOwnProperty,jo=Kr.propertyIsEnumerable,Gr=Re(function(){return arguments}())?Re:function(t){return lt(t)&&vo.call(t,"callee")&&!jo.call(t,"callee")};function Po(){return!1}var Jr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Le=Jr&&typeof module=="object"&&module&&!module.nodeType&&module,Oo=Le&&Le.exports===Jr,Fe=Oo?k.Buffer:void 0,No=Fe?Fe.isBuffer:void 0,Yr=No||Po,Mo="[object Arguments]",Ro="[object Array]",Lo="[object Boolean]",Fo="[object Date]",ko="[object Error]",Vo="[object Function]",Uo="[object Map]",qo="[object Number]",xo="[object Object]",zo="[object RegExp]",Ho="[object Set]",Ko="[object String]",Go="[object WeakMap]",Jo="[object ArrayBuffer]",Yo="[object DataView]",Qo="[object Float32Array]",Wo="[object Float64Array]",Xo="[object Int8Array]",Zo="[object Int16Array]",ti="[object Int32Array]",ei="[object Uint8Array]",ri="[object Uint8ClampedArray]",ni="[object Uint16Array]",oi="[object Uint32Array]",j={};j[Qo]=j[Wo]=j[Xo]=j[Zo]=j[ti]=j[ei]=j[ri]=j[ni]=j[oi]=!0;j[Mo]=j[Ro]=j[Jo]=j[Lo]=j[Yo]=j[Fo]=j[ko]=j[Vo]=j[Uo]=j[qo]=j[xo]=j[zo]=j[Ho]=j[Ko]=j[Go]=!1;function ii(t){return lt(t)&&xr(t.length)&&!!j[_t(t)]}function Ee(t){return function(e){return t(e)}}var Qr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yt=Qr&&typeof module=="object"&&module&&!module.nodeType&&module,ai=yt&&yt.exports===Qr,Ht=ai&&Fr.process,ft=function(){try{var t=yt&&yt.require&&yt.require("util").types;return t||Ht&&Ht.binding&&Ht.binding("util")}catch(e){}}(),ke=ft&&ft.isTypedArray,si=ke?Ee(ke):ii,ci=Object.prototype,ui=ci.hasOwnProperty;function fi(t,e){var r=Mt(t),n=!r&&Gr(t),o=!r&&!n&&Yr(t),i=!r&&!n&&!o&&si(t),a=r||n||o||i,s=a?$o(t.length,String):[],c=s.length;for(var u in t)ui.call(t,u)&&!(a&&(u=="length"||o&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wo(u,c)))&&s.push(u);return s}function Wr(t,e){return function(r){return t(e(r))}}var li=Wr(Object.keys,Object),di=Object.prototype,hi=di.hasOwnProperty;function gi(t){if(!Hr(t))return li(t);var e=[];for(var r in Object(t))hi.call(t,r)&&r!="constructor"&&e.push(r);return e}function pi(t){return zr(t)?fi(t):gi(t)}var bt=et(Object,"create");function mi(){this.__data__=bt?bt(null):{},this.size=0}function yi(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var bi="__lodash_hash_undefined__",wi=Object.prototype,Ci=wi.hasOwnProperty;function Ti(t){var e=this.__data__;if(bt){var r=e[t];return r===bi?void 0:r}return Ci.call(e,t)?e[t]:void 0}var Ei=Object.prototype,Ai=Ei.hasOwnProperty;function Ii(t){var e=this.__data__;return bt?e[t]!==void 0:Ai.call(e,t)}var Si="__lodash_hash_undefined__";function _i(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=bt&&e===void 0?Si:e,this}function X(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}X.prototype.clear=mi;X.prototype.delete=yi;X.prototype.get=Ti;X.prototype.has=Ii;X.prototype.set=_i;function Di(){this.__data__=[],this.size=0}function Lt(t,e){for(var r=t.length;r--;)if(qr(t[r][0],e))return r;return-1}var $i=Array.prototype,Bi=$i.splice;function vi(t){var e=this.__data__,r=Lt(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Bi.call(e,r,1),--this.size,!0}function ji(t){var e=this.__data__,r=Lt(e,t);return r<0?void 0:e[r][1]}function Pi(t){return Lt(this.__data__,t)>-1}function Oi(t,e){var r=this.__data__,n=Lt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function K(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=Di;K.prototype.delete=vi;K.prototype.get=ji;K.prototype.has=Pi;K.prototype.set=Oi;var wt=et(k,"Map");function Ni(){this.size=0,this.__data__={hash:new X,map:new(wt||K),string:new X}}function Mi(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ft(t,e){var r=t.__data__;return Mi(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Ri(t){var e=Ft(this,t).delete(t);return this.size-=e?1:0,e}function Li(t){return Ft(this,t).get(t)}function Fi(t){return Ft(this,t).has(t)}function ki(t,e){var r=Ft(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function rt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rt.prototype.clear=Ni;rt.prototype.delete=Ri;rt.prototype.get=Li;rt.prototype.has=Fi;rt.prototype.set=ki;function Xr(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Ve=Q?Q.isConcatSpreadable:void 0;function Vi(t){return Mt(t)||Gr(t)||!!(Ve&&t&&t[Ve])}function Ui(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=Vi),o||(o=[]);++i<a;){var s=t[i];r(s)&&Xr(o,s)}return o}var qi=Wr(Object.getPrototypeOf,Object);function xi(){this.__data__=new K,this.size=0}function zi(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Hi(t){return this.__data__.get(t)}function Ki(t){return this.__data__.has(t)}var Gi=200;function Ji(t,e){var r=this.__data__;if(r instanceof K){var n=r.__data__;if(!wt||n.length<Gi-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new rt(n)}return r.set(t,e),this.size=r.size,this}function dt(t){var e=this.__data__=new K(t);this.size=e.size}dt.prototype.clear=xi;dt.prototype.delete=zi;dt.prototype.get=Hi;dt.prototype.has=Ki;dt.prototype.set=Ji;var Zr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ue=Zr&&typeof module=="object"&&module&&!module.nodeType&&module,Yi=Ue&&Ue.exports===Zr,qe=Yi?k.Buffer:void 0;qe&&qe.allocUnsafe;function Qi(t,e){return t.slice()}function Wi(t,e){for(var r=-1,n=t==null?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function Xi(){return[]}var Zi=Object.prototype,ta=Zi.propertyIsEnumerable,xe=Object.getOwnPropertySymbols,ea=xe?function(t){return t==null?[]:(t=Object(t),Wi(xe(t),function(e){return ta.call(t,e)}))}:Xi;function ra(t,e,r){var n=e(t);return Mt(t)?n:Xr(n,r(t))}function na(t){return ra(t,pi,ea)}var ye=et(k,"DataView"),be=et(k,"Promise"),ct=et(k,"Set"),ze="[object Map]",oa="[object Object]",He="[object Promise]",Ke="[object Set]",Ge="[object WeakMap]",Je="[object DataView]",ia=tt(ye),aa=tt(wt),sa=tt(be),ca=tt(ct),ua=tt(me),H=_t;(ye&&H(new ye(new ArrayBuffer(1)))!=Je||wt&&H(new wt)!=ze||be&&H(be.resolve())!=He||ct&&H(new ct)!=Ke||me&&H(new me)!=Ge)&&(H=function(t){var e=_t(t),r=e==oa?t.constructor:void 0,n=r?tt(r):"";if(n)switch(n){case ia:return Je;case aa:return ze;case sa:return He;case ca:return Ke;case ua:return Ge}return e});var fa=Object.prototype,la=fa.hasOwnProperty;function da(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&la.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Ye=k.Uint8Array;function Ae(t){var e=new t.constructor(t.byteLength);return new Ye(e).set(new Ye(t)),e}function ha(t,e){var r=Ae(t.buffer);return new t.constructor(r,t.byteOffset,t.byteLength)}var ga=/\w*$/;function pa(t){var e=new t.constructor(t.source,ga.exec(t));return e.lastIndex=t.lastIndex,e}var Qe=Q?Q.prototype:void 0,We=Qe?Qe.valueOf:void 0;function ma(t){return We?Object(We.call(t)):{}}function ya(t,e){var r=Ae(t.buffer);return new t.constructor(r,t.byteOffset,t.length)}var ba="[object Boolean]",wa="[object Date]",Ca="[object Map]",Ta="[object Number]",Ea="[object RegExp]",Aa="[object Set]",Ia="[object String]",Sa="[object Symbol]",_a="[object ArrayBuffer]",Da="[object DataView]",$a="[object Float32Array]",Ba="[object Float64Array]",va="[object Int8Array]",ja="[object Int16Array]",Pa="[object Int32Array]",Oa="[object Uint8Array]",Na="[object Uint8ClampedArray]",Ma="[object Uint16Array]",Ra="[object Uint32Array]";function La(t,e,r){var n=t.constructor;switch(e){case _a:return Ae(t);case ba:case wa:return new n(+t);case Da:return ha(t);case $a:case Ba:case va:case ja:case Pa:case Oa:case Na:case Ma:case Ra:return ya(t);case Ca:return new n;case Ta:case Ia:return new n(t);case Ea:return pa(t);case Aa:return new n;case Sa:return ma(t)}}function Fa(t){return typeof t.constructor=="function"&&!Hr(t)?to(qi(t)):{}}var ka="[object Map]";function Va(t){return lt(t)&&H(t)==ka}var Xe=ft&&ft.isMap,Ua=Xe?Ee(Xe):Va,qa="[object Set]";function xa(t){return lt(t)&&H(t)==qa}var Ze=ft&&ft.isSet,za=Ze?Ee(Ze):xa,tn="[object Arguments]",Ha="[object Array]",Ka="[object Boolean]",Ga="[object Date]",Ja="[object Error]",en="[object Function]",Ya="[object GeneratorFunction]",Qa="[object Map]",Wa="[object Number]",rn="[object Object]",Xa="[object RegExp]",Za="[object Set]",ts="[object String]",es="[object Symbol]",rs="[object WeakMap]",ns="[object ArrayBuffer]",os="[object DataView]",is="[object Float32Array]",as="[object Float64Array]",ss="[object Int8Array]",cs="[object Int16Array]",us="[object Int32Array]",fs="[object Uint8Array]",ls="[object Uint8ClampedArray]",ds="[object Uint16Array]",hs="[object Uint32Array]",B={};B[tn]=B[Ha]=B[ns]=B[os]=B[Ka]=B[Ga]=B[is]=B[as]=B[ss]=B[cs]=B[us]=B[Qa]=B[Wa]=B[rn]=B[Xa]=B[Za]=B[ts]=B[es]=B[fs]=B[ls]=B[ds]=B[hs]=!0;B[Ja]=B[en]=B[rs]=!1;function Bt(t,e,r,n,o,i){var a;if(a!==void 0)return a;if(!Rt(t))return t;var s=Mt(t);if(s)a=da(t);else{var c=H(t),u=c==en||c==Ya;if(Yr(t))return Qi(t);if(c==rn||c==tn||u&&!o)a=u?{}:Fa(t);else{if(!B[c])return o?t:{};a=La(t,c)}}i||(i=new dt);var f=i.get(t);if(f)return f;i.set(t,a),za(t)?t.forEach(function(l){a.add(Bt(l,e,r,l,t,i))}):Ua(t)&&t.forEach(function(l,m){a.set(m,Bt(l,e,r,m,t,i))});var d=na,h=s?void 0:d(t);return fo(h||t,function(l,m){h&&(m=l,l=t[m]),Ao(a,m,Bt(l,e,r,m,t,i))}),a}var gs=1,ps=4;function kt(t){return Bt(t,gs|ps)}var ms="__lodash_hash_undefined__";function ys(t){return this.__data__.set(t,ms),this}function bs(t){return this.__data__.has(t)}function jt(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new rt;++e<r;)this.add(t[e])}jt.prototype.add=jt.prototype.push=ys;jt.prototype.has=bs;function ws(t,e){return t.has(e)}function nn(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}function Cs(t){return lt(t)&&zr(t)}var Ts=1/0,Es=ct&&1/nn(new ct([,-0]))[1]==Ts?function(t){return new ct(t)}:ro,As=200;function Is(t,e,r){var n=-1,o=mo,i=t.length,a=!0,s=[],c=s;if(i>=As){var u=Es(t);if(u)return nn(u);a=!1,o=ws,c=new jt}else c=s;t:for(;++n<i;){var f=t[n],d=f;if(f=f!==0?f:0,a&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue t;s.push(f)}else o(c,d,r)||(c!==s&&c.push(d),s.push(f))}return s}So(function(t){return Is(Ui(t,1,Cs))});class Ss{}class on extends Ss{constructor(r){super();v(this,"data",{});v(this,"event",new An.EventEmitter);this.data=r}update(r,n){n?Te(n,r,this.data):this.data=r;const o={updateData:r,path:n!=null?n:""};n&&this.event.emit(n,o),this.event.emit("",o)}on(r,n){this.event.on(r,n)}off(r,n){this.event.off(r,n)}getData(r){return r?Z(r,this.data):this.data}destroy(){}}var Ot,Tt,Et,F,W,At;class an extends Lr{constructor(r){var i,a,s,c,u;super();v(this,"isInit",!1);v(this,"app");v(this,"mockData");M(this,Ot,"base");M(this,Tt);M(this,Et);M(this,F);M(this,W,[]);M(this,At,[]);R(this,Tt,r.schema.id),R(this,Et,r.schema),this.app=r.app,this.setFields(r.schema.fields),this.setMethods(r.schema.methods||[]);let n=r.initialData;const o=r.ObservedDataClass||on;if(this.app.platform==="editor")this.mockData=((a=(i=r.schema.mocks)==null?void 0:i.find(f=>f.useInEditor))==null?void 0:a.data)||this.getDefaultData(),n=kt(this.mockData);else if(typeof r.useMock=="boolean"&&r.useMock)this.mockData=(c=(s=r.schema.mocks)==null?void 0:s.find(f=>f.enable))==null?void 0:c.data,n=this.mockData||this.getDefaultData();else if(!r.initialData)n=this.getDefaultData();else{R(this,F,new o((u=r.initialData)!=null?u:{})),this.isInit=!0;return}R(this,F,new o(n!=null?n:{}))}get id(){return N(this,Tt)}get type(){return N(this,Ot)}get schema(){return N(this,Et)}get fields(){return N(this,W)}get methods(){return N(this,At)}setFields(r){R(this,W,r)}setMethods(r){R(this,At,r)}get data(){return N(this,F).getData("")}setData(r,n){N(this,F).update(r,n);const o={updateData:r,path:n};this.emit("change",o)}setValue(r,n){return this.setData(n,r)}onDataChange(r,n){N(this,F).on(r,n)}offDataChange(r,n){N(this,F).off(r,n)}getDefaultData(){return ln(N(this,W))}async init(){this.isInit=!0}destroy(){R(this,W,[]),this.removeAllListeners(),N(this,F).destroy()}}Ot=new WeakMap,Tt=new WeakMap,Et=new WeakMap,F=new WeakMap,W=new WeakMap,At=new WeakMap;const tr=t=>Object.entries(t).reduce((e,[r,n])=>{let o=n;return typeof n=="object"&&(o=JSON.stringify(n)),typeof n<"u"?"".concat(e).concat(e?"&":"").concat(globalThis.encodeURIComponent(r),"=").concat(globalThis.encodeURIComponent("".concat(o))):e},""),_s=async t=>{var f;const{url:e,method:r="GET",headers:n={},params:o={},data:i={},...a}=t,s=tr(o);let c=JSON.stringify(i);return(f=n["Content-Type"])!=null&&f.includes("application/x-www-form-urlencoded")&&(c=tr(i)),(await globalThis.fetch(s?"".concat(e,"?").concat(s):e,{method:r,headers:n,body:r==="GET"?void 0:c,...a})).json()};var ut,It,St,Nt;class Ds extends an{constructor(r){const{options:n}=r.schema;super(r);v(this,"isLoading",!1);v(this,"error");v(this,"httpOptions");M(this,ut);M(this,It,[]);M(this,St,[]);M(this,Nt,"http");this.httpOptions=n,typeof r.request=="function"?R(this,ut,r.request):typeof globalThis.fetch=="function"&&R(this,ut,_s),this.methods.forEach(o=>{typeof o.content=="function"&&(o.timing==="beforeRequest"&&N(this,It).push(o.content),o.timing==="afterRequest"&&N(this,St).push(o.content))})}get type(){return N(this,Nt)}async init(){this.schema.autoFetch&&await this.request(),super.init()}async request(r={}){var u,f;this.isLoading=!0;const{url:n,params:o,data:i,headers:a,...s}=this.httpOptions;let c={url:typeof n=="function"?n({app:this.app,dataSource:this}):n,params:typeof o=="function"?o({app:this.app,dataSource:this}):o,data:typeof i=="function"?i({app:this.app,dataSource:this}):i,headers:typeof a=="function"?a({app:this.app,dataSource:this}):a,...s,...r};try{for(const d of N(this,It))await d({options:c,params:{},dataSource:this,app:this.app});if(typeof this.schema.beforeRequest=="function"&&(c=await this.schema.beforeRequest(c,{app:this.app,dataSource:this})),this.mockData)this.setData(this.mockData);else{let d=await((u=N(this,ut))==null?void 0:u.call(this,c));for(const h of N(this,St))await h({res:d,options:c,params:{},dataSource:this,app:this.app});if(typeof this.schema.afterResponse=="function"&&(d=await this.schema.afterResponse(d,{app:this.app,dataSource:this,options:c})),(f=this.schema.responseOptions)!=null&&f.dataPath){const h=Z(this.schema.responseOptions.dataPath,d);this.setData(h)}else this.setData(d)}this.error=void 0}catch(d){this.error={msg:d.message},this.emit("error",d)}this.isLoading=!1}get(r){return this.request({...r,method:"GET"})}post(r){return this.request({...r,method:"POST"})}}ut=new WeakMap,It=new WeakMap,St=new WeakMap,Nt=new WeakMap;const Kt=new Map,$s=(t,e,r)=>{let n;if(r){const c=[];e.forEach(u=>{hn(u,f=>{c.push(f.id)})}),n="".concat(t.id,":").concat(c.join(":"))}else n="".concat(t.id,":").concat(e.map(c=>c.id).join(":"));if(Kt.has(n))return Kt.get(n);const o=new Vs;o.addTarget(new ar({id:t.id,type:"data-source",isTarget:(c,u)=>"".concat(c).includes(un)?!1:Fs(t,c,u,!0)})),o.addTarget(new ar({id:t.id,type:"cond",isTarget:(c,u)=>ks(t,c,u,!0)})),o.collect(e,{},!0);const{deps:i}=o.getTarget(t.id,"data-source"),{deps:a}=o.getTarget(t.id,"cond"),s={deps:i,condDeps:a};return Kt.set(n,s),s},Bs=(t,e)=>{let r=!0;for(const{op:n,value:o,range:i,field:a}of t){const[s,...c]=a,u=e[s];if(!u||!c.length)break;try{const f=Z(c.join("."),u);if(!Ns(n,f,o,i)){r=!1;break}}catch(f){console.warn(f)}}return r},we=(t,e)=>{if(!t[st]||!Array.isArray(t[st])||!t[st].length)return!0;for(const{cond:r}of t[st])if(r&&Bs(r,e))return!0;return!1},er=(t,e,r=[],n={})=>{const o={...n,[e]:{}};let i=kt(n[e]),a=o[e];return r.forEach((s,c)=>{if(Object.assign(a,i),c===r.length-1){a[s]=t;return}Array.isArray(i[s])&&(i[s]={},a[s]={}),i=i[s],a=a[s]}),o},vs=(t,e)=>{const[r,...n]=t,o=r.indexOf(Pt);if(o>-1){const i=r.substring(o+Pt.length),a=e[i];if(!a)return t;try{return Z(n.join("."),a)}catch(s){return t}}return t},rr=(t,e)=>t.replaceAll(dn,(r,n)=>{try{return Z(n,e)}catch(o){return r}}),nr=(t,e)=>typeof t=="string"?rr(t,e):t!=null&&t.isBindDataSource&&t.dataSourceId?e[t.dataSourceId]:t!=null&&t.isBindDataSourceField&&t.dataSourceId&&typeof t.template=="string"?rr(t.template,e[t.dataSourceId]):Array.isArray(t)&&typeof t[0]=="string"?vs(t,e):t,sn=({compile:t,dsId:e,item:r,deps:n,condDeps:o,inEditor:i,ctxData:a})=>{var f,d;const{items:s,...c}=r,u=kt(c);return(f=o[c.id])!=null&&f.keys.length&&!i&&(u.condResult=we(c,a)),Array.isArray(s)&&s.length?u.items=s.map(h=>sn({compile:t,dsId:e,item:h,deps:n,condDeps:o,inEditor:i,ctxData:a})):s&&(u.items=s),(d=n[u.id])!=null&&d.keys.length?fn(t,u,{[e]:n},e):u},z=class z extends Lr{constructor({app:r,useMock:n,initialData:o}){var a,s;super();v(this,"app");v(this,"dataSourceMap",new Map);v(this,"data",{});v(this,"useMock",!1);this.app=r,this.useMock=n,o&&(this.data=o),(s=(a=r.dsl)==null?void 0:a.dataSources)==null||s.forEach(c=>{this.addDataSource(c)});const i=Array.from(this.dataSourceMap);typeof Promise.allSettled=="function"?Promise.allSettled(i.map(([,c])=>this.init(c))).then(c=>{const u={},f={};c.forEach((d,h)=>{const l=i[h][0];d.status==="fulfilled"?this.data[l]?u[l]=this.data[l]:delete u[l]:d.status==="rejected"&&(delete u[l],f[l]=d.reason)}),this.emit("init",u,f)}):Promise.all(i.map(([,c])=>this.init(c))).then(()=>{this.emit("init",this.data)}).catch(()=>{this.emit("init",this.data)})}static register(r,n){z.dataSourceClassMap.set(r,n)}static getDataSourceClass(r){return z.dataSourceClassMap.get(r)}static registerObservedData(r){z.ObservedDataClass=r}async init(r){var n;if(!r.isInit&&!(this.app.jsEngine&&((n=r.schema.disabledInitInJsEngine)!=null&&n.includes(this.app.jsEngine)))){for(const o of r.methods){if(typeof o.content!="function")return;o.timing==="beforeInit"&&await o.content({params:{},dataSource:r,app:this.app})}await r.init();for(const o of r.methods){if(typeof o.content!="function")return;o.timing==="afterInit"&&await o.content({params:{},dataSource:r,app:this.app})}}}get(r){return this.dataSourceMap.get(r)}async addDataSource(r){if(!r)return;const n=z.dataSourceClassMap.get(r.type)||an,o=new n({app:this.app,schema:r,request:this.app.request,useMock:this.useMock,initialData:this.data[r.id],ObservedDataClass:z.ObservedDataClass});this.dataSourceMap.set(r.id,o),this.data[o.id]=o.data,o.on("change",i=>{this.setData(o,i)})}setData(r,n){this.data[r.id]=r.data,this.emit("change",r.id,n)}removeDataSource(r){var n;(n=this.get(r))==null||n.destroy(),delete this.data[r],this.dataSourceMap.delete(r)}updateSchema(r){r.forEach(n=>{if(!this.get(n.id))return;this.removeDataSource(n.id),this.addDataSource(n);const i=this.get(n.id);i&&this.init(i)})}compiledNode({items:r,...n},o,i=!1){var s;const a=kt(n);return r&&(a.items=Array.isArray(r)&&i?r.map(c=>this.compiledNode(c,o,i)):r),n.condResult===!1||n.visible===!1?a:fn(c=>nr(c,this.data),a,((s=this.app.dsl)==null?void 0:s.dataSourceDeps)||{},o)}compliedConds(r){return we(r,this.data)}compliedIteratorItemConds(r,n,o=[]){const[i,...a]=o,s=this.get(i);if(!s)return!0;const c=er(r,s.id,a,this.data);return we(n,c)}compliedIteratorItems(r,n,o=[]){const[i,...a]=o,s=this.get(i);if(!s)return n;const c=this.app.platform==="editor",u=er(r,s.id,a,this.data),{deps:f={},condDeps:d={}}=$s(s.schema,n,c);return!Object.keys(f).length&&!Object.keys(d).length?n:n.map(h=>sn({compile:l=>nr(l,u),dsId:s.id,item:h,deps:f,condDeps:d,inEditor:c,ctxData:u}))}destroy(){this.removeAllListeners(),this.data={},this.dataSourceMap.forEach(r=>{r.destroy()}),this.dataSourceMap.clear()}onDataChange(r,n,o){var i;return(i=this.get(r))==null?void 0:i.onDataChange(n,o)}offDataChange(r,n,o){var i;return(i=this.get(r))==null?void 0:i.offDataChange(n,o)}};v(z,"dataSourceClassMap",new Map),v(z,"ObservedDataClass",on);let Ce=z;Ce.register("http",Ds);var cn=(t=>(t.CONTAINER="container",t.PAGE="page",t.ROOT="app",t.PAGE_FRAGMENT="page-fragment",t))(cn||{});const st="displayConds",js=(()=>{const t=new Map;return(e,r,n=globalThis.document)=>{let o=t.get(n);if(o||(o=new Map,t.set(n,o)),o.get(e))return o.get(e);const i=new Promise((a,s)=>{const c=n.createElement("script");c.type="text/javascript",r&&(c.crossOrigin=r),c.src=e,n.body.appendChild(c),c.onload=()=>{a()},c.onerror=()=>{s(new Error("加载失败"))},setTimeout(()=>{s(new Error("timeout"))},60*1e3)}).catch(a=>{throw o.delete(e),a});return o.set(e,i),o.get(e)}})(),or=(()=>{const t=new Map;return(e,r=globalThis.document)=>{let n=t.get(r);if(n||(n=new Map,t.set(r,n)),n.get(e))return n.get(e);const o=new Promise((i,a)=>{const s=r.createElement("link");s.rel="stylesheet",s.href=e,r.head.appendChild(s),s.onload=()=>{i()},s.onerror=()=>{a(new Error("加载失败"))},setTimeout(()=>{a(new Error("timeout"))},60*1e3)}).catch(i=>{throw n.delete(e),i});return n.set(e,o),n.get(e)}})(),Ps=(t="")=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase(),Ct=t=>Object.prototype.toString.call(t)==="[object Object]",Ie=t=>"".concat(t).replaceAll(/\[(\d+)\]/g,".$1").split("."),Z=(t="",e={})=>(Array.isArray(t)?t:Ie(t)).reduce((n,o)=>{if(Ct(n)||Array.isArray(n)&&/^\d*$/.test("".concat(o)))return n[o];throw new Error("".concat(e,"中不存在").concat(t))},e),Te=(t,e,r={})=>In(r,t,e),Os=(t={},e)=>Array.from(Object.values(t).reduce((r,n)=>{var o;return(((o=n[e])==null?void 0:o.keys)||[]).forEach(i=>r.add(i)),r},new Set)),un="__tmagic__",ir="__tmagic__dslNode",fn=(t,e,r={},n)=>{let o=[];if(!n)o=Os(r,e.id);else{const i=r[n];o=(i==null?void 0:i[e.id].keys)||[]}return o.forEach(i=>{const a=Ie(i),s=a.map((f,d)=>d<a.length-1?f:"".concat(un).concat(f));let c=Z(s,e);if(typeof c>"u")try{const f=Z(i,e);Te(s.join("."),f,e),c=f}catch(f){console.warn(f);return}let u;try{u=t(c)}catch(f){console.error(f),u=""}Te(i,u,e)}),e},Ns=(t,e,r,n=[])=>{var o,i;switch(typeof e=="string"&&typeof r>"u"&&(r=""),t){case"is":return e===r;case"not":return e!==r;case"=":return e===r;case"!=":return e!==r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r;case"between":return n.length>1&&e>=n[0]&&e<=n[1];case"not_between":return n.length<2||e<n[0]||e>n[1];case"include":return(o=e==null?void 0:e.includes)==null?void 0:o.call(e,r);case"not_include":return typeof e>"u"||!((i=e.includes)!=null&&i.call(e,r))}return!1},ln=t=>{const e={},r={string:void 0,object:{},array:[],boolean:void 0,number:void 0,null:null,any:void 0};return t.forEach(n=>{if(typeof n.defaultValue<"u"){if(n.type==="array"&&!Array.isArray(n.defaultValue)){e[n.name]=r.array;return}if(n.type==="object"&&!Ct(n.defaultValue)){if(typeof n.defaultValue=="string"){try{e[n.name]=JSON.parse(n.defaultValue)}catch(o){e[n.name]=r.object}return}e[n.name]=r.object;return}e[n.name]=Sn(n.defaultValue);return}if(n.type==="object"){e[n.name]=n.fields?ln(n.fields):r.object;return}if(n.type){e[n.name]=r[n.type];return}e[n.name]=void 0}),e},Pt="ds-field::",dn=/\$\{([\s\S]+?)\}/g,hn=(t,e,r=[])=>{e(t,r),Array.isArray(t.items)&&t.items.length&&(r.push(t),t.items.forEach(n=>{hn(n,e,[...r])}))};var Y=(t=>(t.DEFAULT="default",t.CODE_BLOCK="code-block",t.DATA_SOURCE="data-source",t.DATA_SOURCE_METHOD="data-source-method",t.DATA_SOURCE_COND="data-source-cond",t))(Y||{});class ar{constructor(e){v(this,"isTarget");v(this,"id");v(this,"name");v(this,"type",Y.DEFAULT);v(this,"deps",{});v(this,"isCollectByDefault");var r;this.isTarget=e.isTarget,this.id=e.id,this.name=e.name,this.isCollectByDefault=(r=e.isCollectByDefault)!=null?r:!0,e.type&&(this.type=e.type),e.initialDeps&&(this.deps=e.initialDeps)}updateDep({id:e,name:r,key:n,data:o}){const i=this.deps[e]||{name:r,keys:[]};i.name=r,i.data=o,this.deps[e]=i,i.keys.indexOf(n)===-1&&i.keys.push(n)}removeDep(e,r){if(typeof e>"u"){Object.keys(this.deps).forEach(o=>{delete this.deps[o]});return}const n=this.deps[e];if(n)if(r){const o=n.keys.indexOf(r);n.keys.splice(o,1),n.keys.length===0&&delete this.deps[e]}else delete this.deps[e]}hasDep(e,r){const n=this.deps[e];return!!(n!=null&&n.keys.find(o=>o===r))}destroy(){this.deps={}}}const Se=(t,e)=>{let r=e;return t.some((n,o)=>{const i=r.find(({name:a})=>a===n);return r=(i==null?void 0:i.fields)||[],i&&i.type==="array"&&/^(?!\d+$).*$/.test("".concat(t[o+1]))&&o<t.length-1})},Ms=(t,e,r=!1)=>{const n=t.match(dn)||[];if(n.length<=0)return!1;const o=[],i=[];return n.forEach(a=>{const s=a.substring(2,a.length-1),c=Ie(s),u=c.shift();!u||u!==e.id||(Se(c,e.fields)?o.push(a):i.push(a))}),r?o.length>0:i.length>0},Rs=(t,e)=>(t==null?void 0:t.isBindDataSourceField)&&t.dataSourceId&&t.dataSourceId===e&&typeof t.template=="string",Ls=(t,e)=>{if(!Array.isArray(t)||typeof t[0]!="string")return!1;const[r]=t,n=r.indexOf(Pt);return n===-1?!1:r.substring(n+Pt.length)===e},Fs=(t,e,r,n=!1)=>{if("".concat(e).startsWith(st))return!1;if(typeof r=="string")return Ms(r,t,n);if(Ct(r)&&(r!=null&&r.isBindDataSource)&&r.dataSourceId&&r.dataSourceId===t.id||Rs(r,t.id))return!0;if(Ls(r,t.id)){const[,...o]=r,i=Se(o,t.fields);return n?i:!i}return!1},ks=(t,e,r,n=!1)=>{var a;if(!Array.isArray(r)||!t)return!1;const[o,...i]=r;if(o!==t.id||!"".concat(e).startsWith(st))return!1;if((a=t.fields)!=null&&a.find(s=>s.name===i[0])){const s=Se(i,t.fields);return n?s:!s}return!1},sr=(t,e,r)=>{Object.values(t).forEach(n=>{Object.values(n).forEach(o=>{r&&o.type!==r||e(o)})})};class Vs{constructor(e){v(this,"targetsList",{});v(this,"childrenProp","items");v(this,"idProp","id");v(this,"nameProp","name");e!=null&&e.initialTargets&&(this.targetsList=e.initialTargets),e!=null&&e.childrenProp&&(this.childrenProp=e.childrenProp)}getTargetsList(){return this.targetsList}getTargets(e=Y.DEFAULT){return this.targetsList[e]||{}}addTarget(e){const r=this.getTargets(e.type)||{};this.targetsList[e.type]=r,r[e.id]=e}getTarget(e,r=Y.DEFAULT){return this.getTargets(r)[e]}hasTarget(e,r=Y.DEFAULT){return!!this.getTarget(e,r)}hasSpecifiedTypeTarget(e=Y.DEFAULT){return Object.keys(this.getTargets(e)).length>0}removeTarget(e,r=Y.DEFAULT){const n=this.getTargets(r);n[e]&&(n[e].destroy(),delete n[e])}removeTargets(e=Y.DEFAULT){const r=this.targetsList[e];if(r){for(const n of Object.values(r))n.destroy();delete this.targetsList[e]}}clearTargets(){Object.keys(this.targetsList).forEach(e=>{delete this.targetsList[e]})}collect(e,r={},n=!1,o){this.collectByCallback(e,o,({node:i,target:a})=>{this.removeTargetDep(a,i),this.collectItem(i,a,r,n)})}collectByCallback(e,r,n){sr(this.targetsList,o=>{!r&&!o.isCollectByDefault||e.forEach(i=>{n({node:i,target:o})})},r)}clear(e,r){let{targetsList:n}=this;r&&(n={[r]:this.getTargets(r)});const o=[];sr(n,i=>{e?e.forEach(a=>{i.removeDep(a[this.idProp]),Array.isArray(a[this.childrenProp])&&a[this.childrenProp].length&&!o.includes(a[this.idProp])&&(o.push(a[this.idProp]),this.clear(a[this.childrenProp]))}):i.removeDep()})}clearByType(e,r){this.clear(r,e)}collectItem(e,r,n={},o=!1){const i=(a,s="")=>{const c=(u,f)=>{const d=u===this.childrenProp,h=s?"".concat(s,".").concat(u):u;r.isTarget(h,f)?r.updateDep({id:e[this.idProp],name:"".concat(e[this.nameProp]||e[this.idProp]),data:n,key:h}):!d&&Array.isArray(f)?f.forEach((l,m)=>{Ct(l)&&i(l,"".concat(h,"[").concat(m,"]"))}):Ct(f)&&i(f,h),d&&o&&Array.isArray(f)&&f.forEach(l=>{this.collectItem(l,r,n,o)})};Object.entries(a).forEach(([u,f])=>{typeof f>"u"||f===""||c(u,f)})};i(e)}removeTargetDep(e,r,n){e.removeDep(r[this.idProp],n),typeof n>"u"&&Array.isArray(r[this.childrenProp])&&r[this.childrenProp].length&&r[this.childrenProp].forEach(o=>{this.removeTargetDep(e,o,n)})}}const V=({methods:t={},config:e,iteratorContainerId:r,iteratorIndex:n})=>{const o=VueDemi.inject("app"),i={config:e,...t},a=c=>{if(c.visible===!1||c.condResult===!1)return!1;const u=c.display;return typeof u=="function"?u(o):u!==!1},s=_n(e)&&e.id?o==null?void 0:o.getNode(e.id,r,n):void 0;return s&&(s.emit("created",i),VueDemi.onMounted(()=>{s.emit("mounted",i)}),VueDemi.onBeforeUnmount(()=>{s.emit("destroy",i)})),{app:o,node:s,display:a}};function ht(t=""){let e,r,n;return typeof t=="string"?e=t:{componentType:e,app:r}=t,(!e||e==="")&&(e="container"),r||(r=VueDemi.inject("app")),n=cr({componentType:e,app:r}),!n&&!e.startsWith("magic-ui-")&&(e="magic-ui-".concat(Dn(e)),n=cr({componentType:e,app:r})),n!=null?n:e}function cr({componentType:t,app:e}){return e==null?void 0:e.resolveComponent(t)}const Us=t=>{if(t.cssFile&&or(t.cssFile),Array.isArray(t.cssFiles)&&t.cssFiles.map(e=>or(e.url)),t.css){const e=window.document.createElement("style");e.innerHTML=t.css,window.document.head.appendChild(e)}},qs=t=>{Array.isArray(t.jsFiles)&&t.jsFiles.map(e=>js(e.url))},xs=VueDemi.defineComponent({props:{config:{type:Object,required:!0},model:{type:Object,default:()=>({})}},setup(t){const e=()=>{window.location.reload()},{app:r}=V({config:t.config,methods:{refresh:e}});return(r==null?void 0:r.jsEngine)==="browser"&&(Us(t.config),qs(t.config)),{containerComponent:ht({componentType:"container",app:r})}}}),U=(t,e)=>{const r=t.__vccOpts||t;for(const[n,o]of e)r[n]=o;return r};function zs(t,e,r,n,o,i){return Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(t.containerComponent),{class:"magic-ui-page","data-tmagic-id":t.config.id,config:t.config},null,8,["data-tmagic-id","config"])}const Hs=U(xs,[["render",zs]]),Ks=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){const{display:e,app:r}=V({config:t.config,iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex,methods:{}}),n=VueDemi.computed(()=>{const i=["magic-ui-container"];return t.config.layout&&i.push("magic-layout-".concat(t.config.layout)),t.config.className&&i.push(t.config.className),i.join(" ")}),o=VueDemi.computed(()=>t.config[ir]?{}:r==null?void 0:r.transformStyle(t.config.style||{}));return{app:r,className:n,style:o,IS_DSL_NODE_KEY:ir,display:e,toLine:Ps,useComponent:ht}}});function Gs(t,e,r,n,o,i){return t.display(t.config)?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(t.className),style:Vue.normalizeStyle(t.style)},[Vue.renderSlot(t.$slots,"default",{},()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t.config.items,(a,s)=>{var c;return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[t.display(a)?(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(t.useComponent({componentType:a.type,app:t.app})),{key:a.id,"data-tmagic-id":a.id,"data-tmagic-iterator-index":t.iteratorIndex,"data-tmagic-iterator-container-id":t.iteratorContainerId,"data-container-index":s,class:Vue.normalizeClass(a.className?"".concat(a.className," magic-ui-").concat(t.toLine(a.type)):"magic-ui-".concat(t.toLine(a.type))),style:Vue.normalizeStyle((c=t.app)==null?void 0:c.transformStyle(a.style||{})),config:{...a,[t.IS_DSL_NODE_KEY]:!0},"container-index":s,"iterator-index":t.iteratorIndex,"iterator-container-id":t.iteratorContainerId},null,8,["data-tmagic-id","data-tmagic-iterator-index","data-tmagic-iterator-container-id","data-container-index","class","style","config","container-index","iterator-index","iterator-container-id"])):Vue.createCommentVNode("",!0)],64)}),256))])],6)):Vue.createCommentVNode("",!0)}const Js=U(Ks,[["render",Gs]]),Ys=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){V({config:t.config,methods:{},iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex})}});function Qs(t,e,r,n,o,i){return Vue.openBlock(),Vue.createElementBlock("button",null,[Vue.renderSlot(t.$slots,"default",{},()=>{var a;return[Vue.createTextVNode(Vue.toDisplayString(((a=t.config)==null?void 0:a.text)||""),1)]})])}const Ws=U(Ys,[["render",Qs]]),Xs=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){V({config:t.config,methods:{},iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex})}});function Zs(t,e,r,n,o,i){return Vue.openBlock(),Vue.createElementBlock("p",null,Vue.toDisplayString(t.config.text),1)}const tc=U(Xs,[["render",Zs]]),ec=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){const e=()=>{t.config.url&&(window.location.href=t.config.url)};return V({config:t.config,iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex,methods:{}}),{clickHandler:e}}}),rc=["src"];function nc(t,e,r,n,o,i){return Vue.openBlock(),Vue.createElementBlock("img",{src:t.config.src,onClick:e[0]||(e[0]=(...a)=>t.clickHandler&&t.clickHandler(...a))},null,8,rc)}const oc=U(ec,[["render",nc]]);var at={},Gt,ur;function ic(){return ur||(ur=1,Gt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Gt}var Jt={},J={},fr;function nt(){if(fr)return J;fr=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return J.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},J.getSymbolTotalCodewords=function(n){return e[n]},J.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},J.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');t=n},J.isKanjiModeEnabled=function(){return typeof t<"u"},J.toSJIS=function(n){return t(n)},J}var Yt={},lr;function _e(){return lr||(lr=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,o){if(t.isValid(n))return n;try{return e(n)}catch(i){return o}}}(Yt)),Yt}var Qt,dr;function ac(){if(dr)return Qt;dr=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)===1},put:function(e,r){for(let n=0;n<r;n++)this.putBit((e>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Qt=t,Qt}var Wt,hr;function sc(){if(hr)return Wt;hr=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,r,n,o){const i=e*this.size+r;this.data[i]=n,o&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,r){return this.data[e*this.size+r]},t.prototype.xor=function(e,r,n){this.data[e*this.size+r]^=n},t.prototype.isReserved=function(e,r){return this.reservedBit[e*this.size+r]},Wt=t,Wt}var Xt={},gr;function cc(){return gr||(gr=1,function(t){const e=nt().getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const o=Math.floor(n/7)+2,i=e(n),a=i===145?26:Math.ceil((i-13)/(2*o-2))*2,s=[i-7];for(let c=1;c<o-1;c++)s[c]=s[c-1]-a;return s.push(6),s.reverse()},t.getPositions=function(n){const o=[],i=t.getRowColCoords(n),a=i.length;for(let s=0;s<a;s++)for(let c=0;c<a;c++)s===0&&c===0||s===0&&c===a-1||s===a-1&&c===0||o.push([i[s],i[c]]);return o}}(Xt)),Xt}var Zt={},pr;function uc(){if(pr)return Zt;pr=1;const t=nt().getSymbolSize,e=7;return Zt.getPositions=function(n){const o=t(n);return[[0,0],[o-e,0],[0,o-e]]},Zt}var te={},mr;function fc(){return mr||(mr=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const i=o.size;let a=0,s=0,c=0,u=null,f=null;for(let d=0;d<i;d++){s=c=0,u=f=null;for(let h=0;h<i;h++){let l=o.get(d,h);l===u?s++:(s>=5&&(a+=e.N1+(s-5)),u=l,s=1),l=o.get(h,d),l===f?c++:(c>=5&&(a+=e.N1+(c-5)),f=l,c=1)}s>=5&&(a+=e.N1+(s-5)),c>=5&&(a+=e.N1+(c-5))}return a},t.getPenaltyN2=function(o){const i=o.size;let a=0;for(let s=0;s<i-1;s++)for(let c=0;c<i-1;c++){const u=o.get(s,c)+o.get(s,c+1)+o.get(s+1,c)+o.get(s+1,c+1);(u===4||u===0)&&a++}return a*e.N2},t.getPenaltyN3=function(o){const i=o.size;let a=0,s=0,c=0;for(let u=0;u<i;u++){s=c=0;for(let f=0;f<i;f++)s=s<<1&2047|o.get(u,f),f>=10&&(s===1488||s===93)&&a++,c=c<<1&2047|o.get(f,u),f>=10&&(c===1488||c===93)&&a++}return a*e.N3},t.getPenaltyN4=function(o){let i=0;const a=o.data.length;for(let c=0;c<a;c++)i+=o.data[c];return Math.abs(Math.ceil(i*100/a/5)-10)*e.N4};function r(n,o,i){switch(n){case t.Patterns.PATTERN000:return(o+i)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(o+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return o*i%2+o*i%3===0;case t.Patterns.PATTERN110:return(o*i%2+o*i%3)%2===0;case t.Patterns.PATTERN111:return(o*i%3+(o+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(o,i){const a=i.size;for(let s=0;s<a;s++)for(let c=0;c<a;c++)i.isReserved(c,s)||i.xor(c,s,r(o,c,s))},t.getBestMask=function(o,i){const a=Object.keys(t.Patterns).length;let s=0,c=1/0;for(let u=0;u<a;u++){i(u),t.applyMask(u,o);const f=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(u,o),f<c&&(c=f,s=u)}return s}}(te)),te}var $t={},yr;function gn(){if(yr)return $t;yr=1;const t=_e(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return $t.getBlocksCount=function(o,i){switch(i){case t.L:return e[(o-1)*4+0];case t.M:return e[(o-1)*4+1];case t.Q:return e[(o-1)*4+2];case t.H:return e[(o-1)*4+3];default:return}},$t.getTotalCodewordsCount=function(o,i){switch(i){case t.L:return r[(o-1)*4+0];case t.M:return r[(o-1)*4+1];case t.Q:return r[(o-1)*4+2];case t.H:return r[(o-1)*4+3];default:return}},$t}var ee={},mt={},br;function lc(){if(br)return mt;br=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let n=1;for(let o=0;o<255;o++)t[o]=n,e[n]=o,n<<=1,n&256&&(n^=285);for(let o=255;o<512;o++)t[o]=t[o-255]}(),mt.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},mt.exp=function(n){return t[n]},mt.mul=function(n,o){return n===0||o===0?0:t[e[n]+e[o]]},mt}var wr;function dc(){return wr||(wr=1,function(t){const e=lc();t.mul=function(n,o){const i=new Uint8Array(n.length+o.length-1);for(let a=0;a<n.length;a++)for(let s=0;s<o.length;s++)i[a+s]^=e.mul(n[a],o[s]);return i},t.mod=function(n,o){let i=new Uint8Array(n);for(;i.length-o.length>=0;){const a=i[0];for(let c=0;c<o.length;c++)i[c]^=e.mul(o[c],a);let s=0;for(;s<i.length&&i[s]===0;)s++;i=i.slice(s)}return i},t.generateECPolynomial=function(n){let o=new Uint8Array([1]);for(let i=0;i<n;i++)o=t.mul(o,new Uint8Array([1,e.exp(i)]));return o}}(ee)),ee}var re,Cr;function hc(){if(Cr)return re;Cr=1;const t=dc();function e(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(n.length+this.degree);o.set(n);const i=t.mod(o,this.genPoly),a=this.degree-i.length;if(a>0){const s=new Uint8Array(this.degree);return s.set(i,a),s}return i},re=e,re}var ne={},oe={},ie={},Tr;function pn(){return Tr||(Tr=1,ie.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ie}var L={},Er;function mn(){if(Er)return L;Er=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";L.KANJI=new RegExp(r,"g"),L.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),L.BYTE=new RegExp(n,"g"),L.NUMERIC=new RegExp(t,"g"),L.ALPHANUMERIC=new RegExp(e,"g");const o=new RegExp("^"+r+"$"),i=new RegExp("^"+t+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return L.testKanji=function(c){return o.test(c)},L.testNumeric=function(c){return i.test(c)},L.testAlphanumeric=function(c){return a.test(c)},L}var Ar;function ot(){return Ar||(Ar=1,function(t){const e=pn(),r=mn();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,a){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?i.ccBits[0]:a<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(i,a){if(t.isValid(i))return i;try{return n(i)}catch(s){return a}}}(oe)),oe}var Ir;function gc(){return Ir||(Ir=1,function(t){const e=nt(),r=gn(),n=_e(),o=ot(),i=pn(),a=7973,s=e.getBCHDigit(a);function c(h,l,m){for(let D=1;D<=40;D++)if(l<=t.getCapacity(D,m,h))return D}function u(h,l){return o.getCharCountIndicator(h,l)+4}function f(h,l){let m=0;return h.forEach(function(D){const P=u(D.mode,l);m+=P+D.getBitsLength()}),m}function d(h,l){for(let m=1;m<=40;m++)if(f(h,m)<=t.getCapacity(m,l,o.MIXED))return m}t.from=function(l,m){return i.isValid(l)?parseInt(l,10):m},t.getCapacity=function(l,m,D){if(!i.isValid(l))throw new Error("Invalid QR Code version");typeof D>"u"&&(D=o.BYTE);const P=e.getSymbolTotalCodewords(l),I=r.getTotalCodewordsCount(l,m),$=(P-I)*8;if(D===o.MIXED)return $;const S=$-u(D,l);switch(D){case o.NUMERIC:return Math.floor(S/10*3);case o.ALPHANUMERIC:return Math.floor(S/11*2);case o.KANJI:return Math.floor(S/13);case o.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(l,m){let D;const P=n.from(m,n.M);if(Array.isArray(l)){if(l.length>1)return d(l,P);if(l.length===0)return 1;D=l[0]}else D=l;return c(D.mode,D.getLength(),P)},t.getEncodedBits=function(l){if(!i.isValid(l)||l<7)throw new Error("Invalid QR Code version");let m=l<<12;for(;e.getBCHDigit(m)-s>=0;)m^=a<<e.getBCHDigit(m)-s;return l<<12|m}}(ne)),ne}var ae={},Sr;function pc(){if(Sr)return ae;Sr=1;const t=nt(),e=1335,r=21522,n=t.getBCHDigit(e);return ae.getEncodedBits=function(i,a){const s=i.bit<<3|a;let c=s<<10;for(;t.getBCHDigit(c)-n>=0;)c^=e<<t.getBCHDigit(c)-n;return(s<<10|c)^r},ae}var se={},ce,_r;function mc(){if(_r)return ce;_r=1;const t=ot();function e(r){this.mode=t.NUMERIC,this.data=r.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let o,i,a;for(o=0;o+3<=this.data.length;o+=3)i=this.data.substr(o,3),a=parseInt(i,10),n.put(a,10);const s=this.data.length-o;s>0&&(i=this.data.substr(o),a=parseInt(i,10),n.put(a,s*3+1))},ce=e,ce}var ue,Dr;function yc(){if(Dr)return ue;Dr=1;const t=ot(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=t.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){let i;for(i=0;i+2<=this.data.length;i+=2){let a=e.indexOf(this.data[i])*45;a+=e.indexOf(this.data[i+1]),o.put(a,11)}this.data.length%2&&o.put(e.indexOf(this.data[i]),6)},ue=r,ue}var fe,$r;function bc(){if($r)return fe;$r=1;const t=ot();function e(r){this.mode=t.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){for(let n=0,o=this.data.length;n<o;n++)r.put(this.data[n],8)},fe=e,fe}var le,Br;function wc(){if(Br)return le;Br=1;const t=ot(),e=nt();function r(n){this.mode=t.KANJI,this.data=n}return r.getBitsLength=function(o){return o*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let o;for(o=0;o<this.data.length;o++){let i=e.toSJIS(this.data[o]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+"\nMake sure your charset is UTF-8");i=(i>>>8&255)*192+(i&255),n.put(i,13)}},le=r,le}var de={exports:{}},vr;function Cc(){return vr||(vr=1,function(t){var e={single_source_shortest_paths:function(r,n,o){var i={},a={};a[n]=0;var s=e.PriorityQueue.make();s.push(n,0);for(var c,u,f,d,h,l,m,D,P;!s.empty();){c=s.pop(),u=c.value,d=c.cost,h=r[u]||{};for(f in h)h.hasOwnProperty(f)&&(l=h[f],m=d+l,D=a[f],P=typeof a[f]>"u",(P||D>m)&&(a[f]=m,s.push(f,m),i[f]=u))}if(typeof o<"u"&&typeof a[o]>"u"){var I=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(I)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var o=[],i=n;i;)o.push(i),r[i],i=r[i];return o.reverse(),o},find_path:function(r,n,o){var i=e.single_source_shortest_paths(r,n,o);return e.extract_shortest_path_from_predecessor_list(i,o)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,o={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return o.queue=[],o.sorter=r.sorter||n.default_sorter,o},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var o={value:r,cost:n};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(de)),de.exports}var jr;function Tc(){return jr||(jr=1,function(t){const e=ot(),r=mc(),n=yc(),o=bc(),i=wc(),a=mn(),s=nt(),c=Cc();function u(I){return unescape(encodeURIComponent(I)).length}function f(I,$,S){const E=[];let O;for(;(O=I.exec(S))!==null;)E.push({data:O[0],index:O.index,mode:$,length:O[0].length});return E}function d(I){const $=f(a.NUMERIC,e.NUMERIC,I),S=f(a.ALPHANUMERIC,e.ALPHANUMERIC,I);let E,O;return s.isKanjiModeEnabled()?(E=f(a.BYTE,e.BYTE,I),O=f(a.KANJI,e.KANJI,I)):(E=f(a.BYTE_KANJI,e.BYTE,I),O=[]),$.concat(S,E,O).sort(function(C,w){return C.index-w.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function h(I,$){switch($){case e.NUMERIC:return r.getBitsLength(I);case e.ALPHANUMERIC:return n.getBitsLength(I);case e.KANJI:return i.getBitsLength(I);case e.BYTE:return o.getBitsLength(I)}}function l(I){return I.reduce(function($,S){const E=$.length-1>=0?$[$.length-1]:null;return E&&E.mode===S.mode?($[$.length-1].data+=S.data,$):($.push(S),$)},[])}function m(I){const $=[];for(let S=0;S<I.length;S++){const E=I[S];switch(E.mode){case e.NUMERIC:$.push([E,{data:E.data,mode:e.ALPHANUMERIC,length:E.length},{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.ALPHANUMERIC:$.push([E,{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.KANJI:$.push([E,{data:E.data,mode:e.BYTE,length:u(E.data)}]);break;case e.BYTE:$.push([{data:E.data,mode:e.BYTE,length:u(E.data)}])}}return $}function D(I,$){const S={},E={start:{}};let O=["start"];for(let p=0;p<I.length;p++){const C=I[p],w=[];for(let g=0;g<C.length;g++){const A=C[g],y=""+p+g;w.push(y),S[y]={node:A,lastCount:0},E[y]={};for(let T=0;T<O.length;T++){const b=O[T];S[b]&&S[b].node.mode===A.mode?(E[b][y]=h(S[b].lastCount+A.length,A.mode)-h(S[b].lastCount,A.mode),S[b].lastCount+=A.length):(S[b]&&(S[b].lastCount=A.length),E[b][y]=h(A.length,A.mode)+4+e.getCharCountIndicator(A.mode,$))}}O=w}for(let p=0;p<O.length;p++)E[O[p]].end=0;return{map:E,table:S}}function P(I,$){let S;const E=e.getBestModeForData(I);if(S=e.from($,E),S!==e.BYTE&&S.bit<E.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(S)+".\n Suggested mode is: "+e.toString(E));switch(S===e.KANJI&&!s.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new r(I);case e.ALPHANUMERIC:return new n(I);case e.KANJI:return new i(I);case e.BYTE:return new o(I)}}t.fromArray=function($){return $.reduce(function(S,E){return typeof E=="string"?S.push(P(E,null)):E.data&&S.push(P(E.data,E.mode)),S},[])},t.fromString=function($,S){const E=d($,s.isKanjiModeEnabled()),O=m(E),p=D(O,S),C=c.find_path(p.map,"start","end"),w=[];for(let g=1;g<C.length-1;g++)w.push(p.table[C[g]].node);return t.fromArray(l(w))},t.rawSplit=function($){return t.fromArray(d($,s.isKanjiModeEnabled()))}}(se)),se}var Pr;function Ec(){if(Pr)return Jt;Pr=1;const t=nt(),e=_e(),r=ac(),n=sc(),o=cc(),i=uc(),a=fc(),s=gn(),c=hc(),u=gc(),f=pc(),d=ot(),h=Tc();function l(p,C){const w=p.size,g=i.getPositions(C);for(let A=0;A<g.length;A++){const y=g[A][0],T=g[A][1];for(let b=-1;b<=7;b++)if(!(y+b<=-1||w<=y+b))for(let _=-1;_<=7;_++)T+_<=-1||w<=T+_||(b>=0&&b<=6&&(_===0||_===6)||_>=0&&_<=6&&(b===0||b===6)||b>=2&&b<=4&&_>=2&&_<=4?p.set(y+b,T+_,!0,!0):p.set(y+b,T+_,!1,!0))}}function m(p){const C=p.size;for(let w=8;w<C-8;w++){const g=w%2===0;p.set(w,6,g,!0),p.set(6,w,g,!0)}}function D(p,C){const w=o.getPositions(C);for(let g=0;g<w.length;g++){const A=w[g][0],y=w[g][1];for(let T=-2;T<=2;T++)for(let b=-2;b<=2;b++)T===-2||T===2||b===-2||b===2||T===0&&b===0?p.set(A+T,y+b,!0,!0):p.set(A+T,y+b,!1,!0)}}function P(p,C){const w=p.size,g=u.getEncodedBits(C);let A,y,T;for(let b=0;b<18;b++)A=Math.floor(b/3),y=b%3+w-8-3,T=(g>>b&1)===1,p.set(A,y,T,!0),p.set(y,A,T,!0)}function I(p,C,w){const g=p.size,A=f.getEncodedBits(C,w);let y,T;for(y=0;y<15;y++)T=(A>>y&1)===1,y<6?p.set(y,8,T,!0):y<8?p.set(y+1,8,T,!0):p.set(g-15+y,8,T,!0),y<8?p.set(8,g-y-1,T,!0):y<9?p.set(8,15-y-1+1,T,!0):p.set(8,15-y-1,T,!0);p.set(g-8,8,1,!0)}function $(p,C){const w=p.size;let g=-1,A=w-1,y=7,T=0;for(let b=w-1;b>0;b-=2)for(b===6&&b--;;){for(let _=0;_<2;_++)if(!p.isReserved(A,b-_)){let G=!1;T<C.length&&(G=(C[T]>>>y&1)===1),p.set(A,b-_,G),y--,y===-1&&(T++,y=7)}if(A+=g,A<0||w<=A){A-=g,g=-g;break}}}function S(p,C,w){const g=new r;w.forEach(function(_){g.put(_.mode.bit,4),g.put(_.getLength(),d.getCharCountIndicator(_.mode,p)),_.write(g)});const A=t.getSymbolTotalCodewords(p),y=s.getTotalCodewordsCount(p,C),T=(A-y)*8;for(g.getLengthInBits()+4<=T&&g.put(0,4);g.getLengthInBits()%8!==0;)g.putBit(0);const b=(T-g.getLengthInBits())/8;for(let _=0;_<b;_++)g.put(_%2?17:236,8);return E(g,p,C)}function E(p,C,w){const g=t.getSymbolTotalCodewords(C),A=s.getTotalCodewordsCount(C,w),y=g-A,T=s.getBlocksCount(C,w),b=g%T,_=T-b,G=Math.floor(g/T),gt=Math.floor(y/T),bn=gt+1,De=G-gt,wn=new c(De);let Vt=0;const Dt=new Array(T),$e=new Array(T);let Ut=0;const Cn=new Uint8Array(p.buffer);for(let it=0;it<T;it++){const xt=it<_?gt:bn;Dt[it]=Cn.slice(Vt,Vt+xt),$e[it]=wn.encode(Dt[it]),Vt+=xt,Ut=Math.max(Ut,xt)}const qt=new Uint8Array(g);let Be=0,q,x;for(q=0;q<Ut;q++)for(x=0;x<T;x++)q<Dt[x].length&&(qt[Be++]=Dt[x][q]);for(q=0;q<De;q++)for(x=0;x<T;x++)qt[Be++]=$e[x][q];return qt}function O(p,C,w,g){let A;if(Array.isArray(p))A=h.fromArray(p);else if(typeof p=="string"){let G=C;if(!G){const gt=h.rawSplit(p);G=u.getBestVersionForData(gt,w)}A=h.fromString(p,G||40)}else throw new Error("Invalid data");const y=u.getBestVersionForData(A,w);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!C)C=y;else if(C<y)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n");const T=S(C,w,A),b=t.getSymbolSize(C),_=new n(b);return l(_,C),m(_),D(_,C),I(_,w,0),C>=7&&P(_,C),$(_,T),isNaN(g)&&(g=a.getBestMask(_,I.bind(null,_,w))),a.applyMask(g,_),I(_,w,g),{modules:_,version:C,errorCorrectionLevel:w,maskPattern:g,segments:A}}return Jt.create=function(C,w){if(typeof C>"u"||C==="")throw new Error("No input text");let g=e.M,A,y;return typeof w<"u"&&(g=e.from(w.errorCorrectionLevel,e.M),A=u.from(w.version),y=a.from(w.maskPattern),w.toSJISFunc&&t.setToSJISFunction(w.toSJISFunc)),O(C,A,g,y)},Jt}var he={},ge={},Or;function yn(){return Or||(Or=1,function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const o=parseInt(n.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const o=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:i,scale:i?4:a,margin:o,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,o){return o.width&&o.width>=n+o.margin*2?o.width/(n+o.margin*2):o.scale},t.getImageWidth=function(n,o){const i=t.getScale(n,o);return Math.floor((n+o.margin*2)*i)},t.qrToImageData=function(n,o,i){const a=o.modules.size,s=o.modules.data,c=t.getScale(a,i),u=Math.floor((a+i.margin*2)*c),f=i.margin*c,d=[i.color.light,i.color.dark];for(let h=0;h<u;h++)for(let l=0;l<u;l++){let m=(h*u+l)*4,D=i.color.light;if(h>=f&&l>=f&&h<u-f&&l<u-f){const P=Math.floor((h-f)/c),I=Math.floor((l-f)/c);D=d[s[P*a+I]?1:0]}n[m++]=D.r,n[m++]=D.g,n[m++]=D.b,n[m]=D.a}}}(ge)),ge}var Nr;function Ac(){return Nr||(Nr=1,function(t){const e=yn();function r(o,i,a){o.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=a,i.width=a,i.style.height=a+"px",i.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch(o){throw new Error("You need to specify a canvas element")}}t.render=function(i,a,s){let c=s,u=a;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),a||(u=n()),c=e.getOptions(c);const f=e.getImageWidth(i.modules.size,c),d=u.getContext("2d"),h=d.createImageData(f,f);return e.qrToImageData(h.data,i,c),r(d,u,f),d.putImageData(h,0,0),u},t.renderToDataURL=function(i,a,s){let c=s;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),c||(c={});const u=t.render(i,a,c),f=c.type||"image/png",d=c.rendererOpts||{};return u.toDataURL(f,d.quality)}}(he)),he}var pe={},Mr;function Ic(){if(Mr)return pe;Mr=1;const t=yn();function e(o,i){const a=o.a/255,s=i+'="'+o.hex+'"';return a<1?s+" "+i+'-opacity="'+a.toFixed(2).slice(1)+'"':s}function r(o,i,a){let s=o+i;return typeof a<"u"&&(s+=" "+a),s}function n(o,i,a){let s="",c=0,u=!1,f=0;for(let d=0;d<o.length;d++){const h=Math.floor(d%i),l=Math.floor(d/i);!h&&!u&&(u=!0),o[d]?(f++,d>0&&h>0&&o[d-1]||(s+=u?r("M",h+a,.5+l+a):r("m",c,0),c=0,u=!1),h+1<i&&o[d+1]||(s+=r("h",f),f=0)):c++}return s}return pe.render=function(i,a,s){const c=t.getOptions(a),u=i.modules.size,f=i.modules.data,d=u+c.margin*2,h=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",l="<path "+e(c.color.dark,"stroke")+' d="'+n(f,u,c.margin)+'"/>',m='viewBox="0 0 '+d+" "+d+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+m+' shape-rendering="crispEdges">'+h+l+"</svg>\n";return typeof s=="function"&&s(null,P),P},pe}var Rr;function Sc(){if(Rr)return at;Rr=1;const t=ic(),e=Ec(),r=Ac(),n=Ic();function o(i,a,s,c,u){const f=[].slice.call(arguments,1),d=f.length,h=typeof f[d-1]=="function";if(!h&&!t())throw new Error("Callback required as last argument");if(h){if(d<2)throw new Error("Too few arguments provided");d===2?(u=s,s=a,a=c=void 0):d===3&&(a.getContext&&typeof u>"u"?(u=c,c=void 0):(u=c,c=s,s=a,a=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(s=a,a=c=void 0):d===2&&!a.getContext&&(c=s,s=a,a=void 0),new Promise(function(l,m){try{const D=e.create(s,c);l(i(D,a,c))}catch(D){m(D)}})}try{const l=e.create(s,c);u(null,i(l,a,c))}catch(l){u(l)}}return at.create=e.create,at.toCanvas=o.bind(null,r.render),at.toDataURL=o.bind(null,r.renderToDataURL),at.toString=o.bind(null,function(i,a,s){return n.render(i,s)}),at}var _c=Sc();const Dc=$n(_c),$c=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){const e=VueDemi.ref();return VueDemi.watch(()=>t.config.url,(r="")=>{Dc.toDataURL(r,(n,o)=>{n&&console.error(n),e.value=o})},{immediate:!0}),V({config:t.config,methods:{},iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex}),{imgUrl:e}}}),Bc=["src"];function vc(t,e,r,n,o,i){return Vue.openBlock(),Vue.createElementBlock("img",{src:t.imgUrl},null,8,Bc)}const jc=U($c,[["render",vc]]),Pc=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){var a;const e=VueDemi.ref(!1),{app:r,node:n}=V({config:t.config,iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex,methods:{openOverlay(){e.value=!0,r==null||r.emit("overlay:open",n)},closeOverlay(){e.value=!1,r==null||r.emit("overlay:close",n)}}}),o=ht({componentType:"container",app:r}),i=(s,c)=>{c.find(u=>u.id===t.config.id)?n==null||n.instance.openOverlay():n==null||n.instance.closeOverlay()};return(a=r==null?void 0:r.page)==null||a.on("editor:select",i),VueDemi.onBeforeUnmount(()=>{var s;(s=r==null?void 0:r.page)==null||s.off("editor:select",i)}),{containerComponent:o,visible:e}}});function Oc(t,e,r,n,o,i){return t.visible?(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(t.containerComponent),{key:0,config:{items:t.config.items}},{default:Vue.withCtx(()=>[Vue.renderSlot(t.$slots,"default")]),_:3},8,["config"])):Vue.createCommentVNode("",!0)}const Nc=U(Pc,[["render",Oc]]),Mc=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){const{app:e}=V({config:t.config,methods:{},iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex}),r=ht({componentType:"container",app:e}),n=VueDemi.computed(()=>{var i,a;return(a=(i=e==null?void 0:e.dsl)==null?void 0:i.items)==null?void 0:a.find(s=>s.id===t.config.pageFragmentId)}),o=VueDemi.computed(()=>{if(!n.value)return{items:[],id:"",type:cn.CONTAINER};const{id:i,type:a,items:s,...c}=n.value,u=s.map(f=>{const{id:d,...h}=f;return{...h}});return(e==null?void 0:e.platform)==="editor"?{...c,items:u}:{...c,items:s}});return{containerComponent:r,containerConfig:o}}});function Rc(t,e,r,n,o,i){return Vue.openBlock(),Vue.createElementBlock("div",null,[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(t.containerComponent),{"iterator-index":t.iteratorIndex,"iterator-container-id":t.iteratorContainerId,config:t.containerConfig,model:t.model},null,8,["iterator-index","iterator-container-id","config","model"]))])}const Lc=U(Mc,[["render",Rc],["__scopeId","data-v-764c36fc"]]),Fc=VueDemi.defineComponent({props:{config:{type:Object,required:!0},model:{type:Object,default:()=>({})}},setup(t){const{app:e}=V({config:t.config,methods:{}}),r=ht({componentType:"container",app:e});return{app:e,containerComponent:r}}});function kc(t,e,r,n,o,i){var a;return Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(t.containerComponent),{class:"magic-ui-page-fragment","data-tmagic-id":t.config.id,config:t.config,style:Vue.normalizeStyle((a=t.app)==null?void 0:a.transformStyle(t.config.style||{}))},null,8,["data-tmagic-id","config","style"])}const Vc=U(Fc,[["render",kc]]),Uc=VueDemi.defineComponent({props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,model:{type:Object,default:()=>({})}},setup(t){const{app:e}=V({config:t.config,iteratorContainerId:t.iteratorContainerId,iteratorIndex:t.iteratorIndex,methods:{}}),r=ht({componentType:"container",app:e}),n=VueDemi.computed(()=>{let{iteratorData:o=[]}=t.config;const{itemConfig:i,dsField:a,items:s}=t.config;return Array.isArray(o)||(o=[]),(e==null?void 0:e.platform)==="editor"&&!o.length&&o.push({}),o.map(c=>{var d,h,l,m;const u=(e==null?void 0:e.platform)!=="editor"&&(h=(d=e==null?void 0:e.dataSourceManager)==null?void 0:d.compliedIteratorItemConds(c,i,a))!=null?h:!0;return{items:(m=(l=e==null?void 0:e.dataSourceManager)==null?void 0:l.compliedIteratorItems(c,s,a))!=null?m:s,condResult:u,style:{position:"relative",left:0,top:0,...i.style}}})});return VueDemi.watch(n,o=>{if(!t.config.id)return;const i=e==null?void 0:e.getNode(t.config.id,t.iteratorContainerId,t.iteratorIndex);i&&(i.resetNodes(),o.forEach((a,s)=>{i.setNodes(a.items,s)}))},{immediate:!0}),{configs:n,containerComponent:r}}});function qc(t,e,r,n,o,i){return Vue.openBlock(),Vue.createElementBlock("div",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t.configs,(a,s)=>(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(t.containerComponent),{"iterator-index":[...t.iteratorIndex||[],s],"iterator-container-id":[...t.iteratorContainerId||[],t.config.id],key:s,config:a},null,8,["iterator-index","iterator-container-id","config"]))),128))])}const xc=U(Uc,[["render",qc]]),Kc={page:Hs,container:Js,button:Ws,text:tc,img:oc,qrcode:jc,overlay:Nc,"page-fragment-container":Lc,"page-fragment":Vc,"iterator-container":xc};export{Kc as default};
//# sourceMappingURL=comp-entry-CkpRydtZ.js.map
