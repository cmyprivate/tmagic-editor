{"version":3,"file":"PageFragmentContainer-legacy-CPX0aCY7.js","sources":["../../../../../../vue-components/page-fragment-container/src/PageFragmentContainer.vue"],"sourcesContent":["<template>\n  <div>\n    <component\n      :is=\"containerComponent\"\n      :iterator-index=\"iteratorIndex\"\n      :iterator-container-id=\"iteratorContainerId\"\n      :config=\"containerConfig\"\n      :model=\"model\"\n    ></component>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, type PropType } from 'vue-demi';\n\nimport { type Id, type MComponent, type MNode, NodeType } from '@tmagic/core';\nimport { useApp, useComponent } from '@tmagic/vue-runtime-help';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MComponent>,\n      required: true,\n    },\n    iteratorIndex: Array as PropType<number[]>,\n    iteratorContainerId: Array as PropType<Id[]>,\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    const { app } = useApp({\n      config: props.config,\n      methods: {},\n      iteratorContainerId: props.iteratorContainerId,\n      iteratorIndex: props.iteratorIndex,\n    });\n\n    const containerComponent = useComponent({ componentType: 'container', app });\n\n    const fragment = computed(() => app?.dsl?.items?.find((page) => page.id === props.config.pageFragmentId));\n\n    const containerConfig = computed(() => {\n      if (!fragment.value) return { items: [], id: '', type: NodeType.CONTAINER };\n\n      const { id, type, items, ...others } = fragment.value;\n      const itemsWithoutId = items.map((item: MNode) => {\n        const { id, ...otherConfig } = item;\n        return {\n          ...otherConfig,\n        };\n      });\n\n      if (app?.platform === 'editor') {\n        return {\n          ...others,\n          items: itemsWithoutId,\n        };\n      }\n\n      return {\n        ...others,\n        items,\n      };\n    });\n\n    return {\n      containerComponent,\n      containerConfig,\n    };\n  },\n});\n</script>\n\n<style scoped>\n.in-editor .magic-ui-page-fragment-container {\n  min-width: 100px;\n  min-height: 100px;\n}\n</style>\n"],"names":["_sfc_main","VueDemi","defineComponent","props","config","type","Object","required","iteratorIndex","Array","iteratorContainerId","model","default","setup","app","useApp","methods","containerComponent","useComponent","componentType","fragment","computed","dsl","items","find","page","id","pageFragmentId","containerConfig","value","NodeType","CONTAINER","others","itemsWithoutId","map","item","id2","otherConfig","platform","_ctx","_cache","$props","$setup","$data","$options","Vue","openBlock","createElementBlock","resolveDynamicComponent"],"mappings":"geAkBe,MAAAA,EAAAC,QAAgBC,gBAAA,CAAAC,MAAA,CACtBC,OAAA,CACGC,KAAAC,OACAC,UAAA,GAERC,cAAAC,MACeC,oBAAAD,MACME,MAAA,CACdN,KAAAC,OACCM,QAAAA,KAAA,CAAA,KAGVC,KAAAA,CAAAV,GAGE,MAAAW,IAAAA,GAAAC,EAAA,CAAuBX,OAAAD,EAAAC,OACPY,QAAA,CAAA,EACJN,oBAAAP,EAAAO,oBACiBF,cAAAL,EAAAK,gBAI7BS,EAAAC,EAAA,CAAAC,cAAA,YAAAL,QAEAM,EAAiBnB,QAAAoB,UAAA,IAAAP,GAAAQ,KAAAC,OAAAC,MAAAC,GAAAA,EAAAC,KAAAvB,EAAAC,OAAAuB,mBA0BjB,MAAA,CAAOV,qBACLW,gBAzBsB3B,uBACtB,IAAAmB,EAAAS,MAAA,MAAA,CAAAN,MAAA,GAAAG,GAAA,GAAArB,KAAAyB,EAAAC,WAEA,MAAAL,GAAAA,EAAArB,KAAAA,EAAAkB,MAAAA,KAAAS,GAAAZ,EAAAS,MACAI,EAAAV,EAAAW,KAAAC,IACE,MAAAT,GAAAU,KAAAC,GAAAF,EACA,MAAA,IAAOE,EACF,IAIP,MAAA,WAAAvB,GAAAwB,SACE,IAAON,EACFT,MAAAU,GAKP,IAAOD,EACFT,QACH,IAOJ,+BArEA,SAAAgB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEG,OAAAC,IAAAC,YAAgBtC,IAAauC,mBAAA,MAAA,KAAA,EAAAF,IAAAC,4BACNpC,IAAmBsC,wBAAAT,EAAAtB,oBAAA,CAAA,iBAAAsB,EAAA/B,cAClCoB,wBAAAA,EAAAA,oBACIxB,OAAAmC,EAAAX"}