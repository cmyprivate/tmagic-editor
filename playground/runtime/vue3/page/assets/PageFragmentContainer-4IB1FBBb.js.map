{"version":3,"file":"PageFragmentContainer-4IB1FBBb.js","sources":["../../../../../../vue-components/page-fragment-container/src/PageFragmentContainer.vue"],"sourcesContent":["<template>\n  <div>\n    <component\n      :is=\"containerComponent\"\n      :iterator-index=\"iteratorIndex\"\n      :iterator-container-id=\"iteratorContainerId\"\n      :config=\"containerConfig\"\n      :model=\"model\"\n    ></component>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, type PropType } from 'vue-demi';\n\nimport { type Id, type MComponent, type MNode, NodeType } from '@tmagic/core';\nimport { useApp, useComponent } from '@tmagic/vue-runtime-help';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MComponent>,\n      required: true,\n    },\n    iteratorIndex: Array as PropType<number[]>,\n    iteratorContainerId: Array as PropType<Id[]>,\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    const { app } = useApp({\n      config: props.config,\n      methods: {},\n      iteratorContainerId: props.iteratorContainerId,\n      iteratorIndex: props.iteratorIndex,\n    });\n\n    const containerComponent = useComponent({ componentType: 'container', app });\n\n    const fragment = computed(() => app?.dsl?.items?.find((page) => page.id === props.config.pageFragmentId));\n\n    const containerConfig = computed(() => {\n      if (!fragment.value) return { items: [], id: '', type: NodeType.CONTAINER };\n\n      const { id, type, items, ...others } = fragment.value;\n      const itemsWithoutId = items.map((item: MNode) => {\n        const { id, ...otherConfig } = item;\n        return {\n          ...otherConfig,\n        };\n      });\n\n      if (app?.platform === 'editor') {\n        return {\n          ...others,\n          items: itemsWithoutId,\n        };\n      }\n\n      return {\n        ...others,\n        items,\n      };\n    });\n\n    return {\n      containerComponent,\n      containerConfig,\n    };\n  },\n});\n</script>\n\n<style scoped>\n.in-editor .magic-ui-page-fragment-container {\n  min-width: 100px;\n  min-height: 100px;\n}\n</style>\n"],"names":["_sfc_main","props","app","useApp","containerComponent","useComponent","fragment","_b","_a","page","containerConfig","NodeType","id","type","items","others","itemsWithoutId","item","id2","otherConfig","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","iteratorIndex","iteratorContainerId"],"mappings":"4LAkBA,MAAeA,EAAA,QAAgB,gBAAA,CAAA,MAAA,CACtB,OAAA,CACG,KAAA,OACA,SAAA,EACI,EACZ,cAAA,MACe,oBAAA,MACM,MAAA,CACd,KAAA,OACC,QAAA,KAAA,CAAA,EACW,CACnB,EACF,MAAAC,EAAA,CAGE,KAAA,CAAA,IAAAC,CAAA,EAAAC,EAAA,CAAuB,OAAAF,EAAA,OACP,QAAA,CAAA,EACJ,oBAAAA,EAAA,oBACiB,cAAAA,EAAA,aACN,CAAA,EAGvBG,EAAAC,EAAA,CAAA,cAAA,YAAA,IAAAH,CAAA,CAAA,EAEAI,EAAiB,QAAA,SAAA,IAAA,SAAA,OAAAC,GAAAC,EAAAN,GAAA,YAAAA,EAAA,MAAA,YAAAM,EAAA,QAAA,YAAAD,EAAA,KAAAE,GAAAA,EAAA,KAAAR,EAAA,OAAA,gBAAA,EAEjBS,EAAwB,sBACtB,GAAA,CAAAJ,EAAA,MAAA,MAAA,CAAA,MAAA,GAAA,GAAA,GAAA,KAAAK,EAAA,SAAA,EAEA,KAAA,CAAA,GAAAC,EAAA,KAAAC,EAAA,MAAAC,EAAA,GAAAC,CAAA,EAAAT,EAAA,MACAU,EAAAF,EAAA,IAAAG,GAAA,CACE,KAAA,CAAA,GAAAC,EAAA,GAAAC,CAAA,EAAAF,EACA,MAAA,CAAO,GAAAE,CACF,CACL,CAAA,EAGF,OAAAjB,GAAA,YAAAA,EAAA,YAAA,SACE,CAAO,GAAAa,EACF,MAAAC,CACI,EAIX,CAAO,GAAAD,EACF,MAAAD,CACH,CACF,CAAA,EAGF,MAAA,CAAO,mBAAAV,EACL,gBAAAM,CACA,CACF,CAEJ,CAAA,EAvEI,SAAAU,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,CAEG,OAAA,IAAA,YAAgBC,IAAa,mBAAA,MAAA,KAAA,EAAA,IAAA,UAAA,kBACNC,IAAmB,wBAAAP,EAAA,kBAAA,EAAA,CAAA,iBAAAA,EAAA,cAClCX,wBAAAA,EAAAA,oBACI,OAAAW,EAAA"}